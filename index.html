<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Special Question For You</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            /* Full-page GIF background */
            background-image: url('https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbm5rdGk5MWRkMXZ2ZzRzZWJzcnF1NG1uOGM1d3IwcHNyMnE3YW95ZiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Lq4tNl2x9sI4w/giphy.gif');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            
            /* Dark overlay for better text readability */
            position: relative;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4); /* Dark overlay */
            z-index: -1;
        }

        /* Sunflower graphics animation */
        .sunflower {
            animation: growAndFloat 10s ease-in-out infinite alternate;
            opacity: 0;
        }

        @keyframes growAndFloat {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); }
        }
        
        .sunflower.one { animation-delay: 1s; }
        .sunflower.two { animation-delay: 2s; }
        .sunflower.three { animation-delay: 3s; }
        .sunflower.four { animation-delay: 4s; }

        /* Typing effect */
        .typing-effect p {
            white-space: pre-wrap;
            overflow: hidden;
            border-right: 0.15em solid #fefae0; /* The typing cursor */
            font-size: 1.5rem;
            max-width: 100%;
        }

        .typing-cursor {
            animation: blink-caret 0.75s step-end infinite;
            border-right: 2px solid;
            color: #fefae0;
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #fefae0 }
        }

        /* Loading animation */
        .loading-dots {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 40px;
        }

        .dot {
            width: 10px;
            height: 10px;
            margin: 0 4px;
            background-color: #fefae0;
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out both;
        }

        .dot:nth-child(1) { animation-delay: -0.32s; }
        .dot:nth-child(2) { animation-delay: -0.16s; }
        .dot:nth-child(3) { animation-delay: 0s; }

        @keyframes bounce {
            0%, 80%, 100% {
                transform: scale(0);
            }
            40% {
                transform: scale(1);
            }
        }
        
        /* Incorrect password animation */
        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
            transform: translate3d(0, 0, 0);
        }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
    </style>
</head>
<body>
    <div class="flex flex-col items-center justify-center h-screen p-4 text-center text-white">
        
        <!-- Sunflower graphics -->
        <div class="sunflower one text-4xl absolute top-[10%] left-[5%]">&#x1F33B;</div>
        <div class="sunflower two text-4xl absolute top-[20%] right-[15%]">&#x1F33B;</div>
        <div class="sunflower three text-4xl absolute bottom-[5%] left-[25%]">&#x1F33B;</div>
        <div class="sunflower four text-4xl absolute bottom-[15%] right-[5%]">&#x1F33B;</div>
        
        <!-- Unlock Feature -->
        <div id="unlock-container" class="relative bg-gray-800 bg-opacity-70 p-8 rounded-2xl shadow-xl w-11/12 sm:w-full max-w-sm mx-auto flex flex-col items-center space-y-4 transition-all duration-1000 ease-in-out">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-pink-400" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2h2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2h2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
            </svg>
            <p class="text-xl font-bold tracking-wide">Enter the magic word</p>
            <input id="unlock-input" type="text" placeholder="Enter code..." class="w-full text-center px-4 py-3 rounded-full bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500">
            <button id="unlockButton" class="w-full px-8 py-3 bg-pink-500 hover:bg-pink-600 text-white font-bold rounded-full shadow-lg transition-all duration-300 transform hover:scale-105">
                Unlock
            </button>
        </div>

        <!-- Message Box -->
        <div id="message-container" class="relative bg-gray-800 bg-opacity-70 p-8 rounded-2xl shadow-xl w-11/12 sm:w-full max-w-md mx-auto transform scale-0 opacity-0 transition-all duration-1000 ease-in-out">
            <div id="message" class="text-lg text-gray-200 font-medium whitespace-pre-line typing-effect"></div>
            <!-- Blinking cursor -->
            <span id="cursor" class="typing-cursor"></span>
        </div>

        <!-- Container for the generated poem -->
        <div id="poem-container" class="mt-8 max-w-md mx-auto transform scale-0 opacity-0 transition-all duration-1000 ease-in-out">
            <div id="poem" class="p-8 bg-gray-800 bg-opacity-70 rounded-2xl shadow-xl text-lg text-gray-200 font-medium"></div>
        </div>

        <!-- Button to generate the poem -->
        <button id="generatePoemBtn" class="mt-4 px-8 py-4 bg-purple-500 hover:bg-purple-600 text-white font-bold rounded-full shadow-lg transition-all duration-300 transform hover:scale-105 hidden">
            âœ¨ Generate a Proposal Poem
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const unlockContainer = document.getElementById('unlock-container');
            const unlockInput = document.getElementById('unlock-input');
            const unlockButton = document.getElementById('unlockButton');
            const messageContainer = document.getElementById('message-container');
            const messageEl = document.getElementById('message');
            const cursorEl = document.getElementById('cursor');
            const generatePoemBtn = document.getElementById('generatePoemBtn');
            const poemContainer = document.getElementById('poem-container');
            const poemEl = document.getElementById('poem');
            
            // The secret unlock code
            const unlockKey = "allufarp";

            // The special message
            const proposalMessage = "Hello beautiful.\n\nFrom the moment I met you, my world changed. Every day with you is a gift, and I can't imagine my life without you.\n\nWill you marry me?";

            let i = 0;

            function typeWriter() {
                if (i < proposalMessage.length) {
                    messageEl.innerHTML += proposalMessage.charAt(i);
                    i++;
                    setTimeout(typeWriter, 50); // Adjust typing speed here
                } else {
                    cursorEl.style.display = 'none'; // Hide cursor after typing is complete
                    // Show the poem generation button
                    generatePoemBtn.style.display = 'block';
                }
            }

            function startAnimationSequence() {
                // Message box appears after a short delay
                setTimeout(() => {
                    messageContainer.classList.remove('scale-0', 'opacity-0');
                    messageContainer.classList.add('scale-100', 'opacity-100');
                    typeWriter();
                }, 1000); 
            }

            async function generatePoem() {
                // Show loading animation and message
                poemEl.innerHTML = `
                    <div class="loading-dots">
                        <div class="dot"></div>
                        <div class="dot"></div>
                        <div class="dot"></div>
                    </div>
                    <div class="mt-4 text-center">Generating a beautiful poem for you...</div>
                `;
                generatePoemBtn.disabled = true;

                // Make the poem container visible
                poemContainer.classList.remove('scale-0', 'opacity-0');
                poemContainer.classList.add('scale-100', 'opacity-100');

                // Call the Gemini API to generate the poem
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=`;
                const payload = {
                    contents: [{ parts: [{ text: "Write a short, simple, beautiful poem about love and marriage, as if for a marriage proposal." }] }],
                    systemInstruction: {
                        parts: [{ text: "You are a romantic poet. Write a short, simple, beautiful poem about love and marriage, as if for a marriage proposal." }]
                    },
                };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`API error: ${response.statusText}`);
                    }

                    const result = await response.json();
                    const poemText = result.candidates?.[0]?.content?.parts?.[0]?.text;
                    
                    if (poemText) {
                        poemEl.innerText = poemText;
                    } else {
                        poemEl.innerText = "Sorry, I couldn't generate a poem right now. Please try again.";
                    }
                    
                } catch (error) {
                    console.error("Failed to generate poem:", error);
                    poemEl.innerText = "Error generating poem. Please try again later.";
                } finally {
                    generatePoemBtn.disabled = false;
                }
            }
            
            unlockButton.addEventListener('click', () => {
                const enteredCode = unlockInput.value.trim().toLowerCase();
                if (enteredCode === unlockKey) {
                    // Correct code: hide the unlock container and start the sequence
                    unlockContainer.classList.add('scale-0', 'opacity-0');
                    unlockContainer.style.visibility = 'hidden';
                    startAnimationSequence();
                } else {
                    // Incorrect code: shake the container to show an error
                    unlockContainer.classList.add('shake');
                    setTimeout(() => {
                        unlockContainer.classList.remove('shake');
                        unlockInput.value = '';
                    }, 500);
                }
            });

            generatePoemBtn.addEventListener('click', generatePoem);
        });
    </script>
</body>
</html>
